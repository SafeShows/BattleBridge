<script>
export default {
    name: "Orbat",
    // props: [
    //     "platoons",
    //     "squads",
    //     "fireteams",
    // ],
    data: () => ({
        companies: [
            {
                "id": "f9d8e1ae-ae4c-11ed-a1c8-0492260e5902",
                "name": "Join Defence Force",
                "description": null,
                "members": [
                    {
                        "uuid": "08a2fb98-ae51-11ed-a1c8-0492260e5902",
                        "name": "Test user 1",
                        "avatar": "https:\/\/cdn.discordapp.com\/avatars\/277494487213932555\/c3ef0be5b960f4a765fb29143583b868.jpg",
                        "discord_avatar": "https:\/\/cdn.discordapp.com\/avatars\/277494487213932555\/c3ef0be5b960f4a765fb29143583b868.jpg",
                        "discord_id": "123",
                        "steam_avatar": null,
                        "steam_id": null,
                        "teamspeak_id": null,
                        "created_at": "2023-02-17 01:25:39",
                        "company_id": "f9d8e1ae-ae4c-11ed-a1c8-0492260e5902",
                        "platoon_id": "19e9d55f-ae51-11ed-a1c8-0492260e5902",
                        "squad_id": "32a62809-ae51-11ed-a1c8-0492260e5902"
                    },
                    {
                        "uuid": "987c183a-ac23-4087-9dc1-a68016adf858",
                        "name": "SafeShows",
                        "avatar": "https:\/\/cdn.discordapp.com\/avatars\/277494487213932555\/c3ef0be5b960f4a765fb29143583b868.jpg",
                        "discord_avatar": "https:\/\/cdn.discordapp.com\/avatars\/277494487213932555\/c3ef0be5b960f4a765fb29143583b868.jpg",
                        "discord_id": "277494487213932555",
                        "steam_avatar": null,
                        "steam_id": null,
                        "teamspeak_id": null,
                        "created_at": "2023-02-17 01:01:25",
                        "company_id": "f9d8e1ae-ae4c-11ed-a1c8-0492260e5902",
                        "platoon_id": "0d643e07-ae4d-11ed-a1c8-0492260e5902",
                        "squad_id": "1e4c8ae0-ae4d-11ed-a1c8-0492260e5902"
                    }
                ],
                "platoons": [
                    {
                        "id": "0d643e07-ae4d-11ed-a1c8-0492260e5902",
                        "name": "Dagger Squadron HQ",
                        "description": null,
                        "company_id": "f9d8e1ae-ae4c-11ed-a1c8-0492260e5902",
                        "members": [
                            {
                                "uuid": "987c183a-ac23-4087-9dc1-a68016adf858",
                                "name": "SafeShows",
                                "avatar": "https:\/\/cdn.discordapp.com\/avatars\/277494487213932555\/c3ef0be5b960f4a765fb29143583b868.jpg",
                                "discord_avatar": "https:\/\/cdn.discordapp.com\/avatars\/277494487213932555\/c3ef0be5b960f4a765fb29143583b868.jpg",
                                "discord_id": "277494487213932555",
                                "steam_avatar": null,
                                "steam_id": null,
                                "teamspeak_id": null,
                                "created_at": "2023-02-17 01:01:25",
                                "company_id": "f9d8e1ae-ae4c-11ed-a1c8-0492260e5902",
                                "platoon_id": "0d643e07-ae4d-11ed-a1c8-0492260e5902",
                                "squad_id": "1e4c8ae0-ae4d-11ed-a1c8-0492260e5902"
                            }
                        ],
                        "squads": [
                            {
                                "id": "1e4c8ae0-ae4d-11ed-a1c8-0492260e5902",
                                "name": "1st Air Troop",
                                "description": null,
                                "platoon_id": "0d643e07-ae4d-11ed-a1c8-0492260e5902",
                                "members": [
                                    {
                                        "uuid": "987c183a-ac23-4087-9dc1-a68016adf858",
                                        "name": "SafeShows",
                                        "avatar": "https:\/\/cdn.discordapp.com\/avatars\/277494487213932555\/c3ef0be5b960f4a765fb29143583b868.jpg",
                                        "discord_avatar": "https:\/\/cdn.discordapp.com\/avatars\/277494487213932555\/c3ef0be5b960f4a765fb29143583b868.jpg",
                                        "discord_id": "277494487213932555",
                                        "steam_avatar": null,
                                        "steam_id": null,
                                        "teamspeak_id": null,
                                        "created_at": "2023-02-17 01:01:25",
                                        "company_id": "f9d8e1ae-ae4c-11ed-a1c8-0492260e5902",
                                        "platoon_id": "0d643e07-ae4d-11ed-a1c8-0492260e5902",
                                        "squad_id": "1e4c8ae0-ae4d-11ed-a1c8-0492260e5902"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "id": "19e9d55f-ae51-11ed-a1c8-0492260e5902",
                        "name": "Shield Squadron HQ",
                        "description": null,
                        "company_id": "f9d8e1ae-ae4c-11ed-a1c8-0492260e5902",
                        "members": [
                            {
                                "uuid": "08a2fb98-ae51-11ed-a1c8-0492260e5902",
                                "name": "Test user 1",
                                "avatar": "https:\/\/cdn.discordapp.com\/avatars\/277494487213932555\/c3ef0be5b960f4a765fb29143583b868.jpg",
                                "discord_avatar": "https:\/\/cdn.discordapp.com\/avatars\/277494487213932555\/c3ef0be5b960f4a765fb29143583b868.jpg",
                                "discord_id": "123",
                                "steam_avatar": null,
                                "steam_id": null,
                                "teamspeak_id": null,
                                "created_at": "2023-02-17 01:25:39",
                                "company_id": "f9d8e1ae-ae4c-11ed-a1c8-0492260e5902",
                                "platoon_id": "19e9d55f-ae51-11ed-a1c8-0492260e5902",
                                "squad_id": "32a62809-ae51-11ed-a1c8-0492260e5902"
                            }
                        ],
                        "squads": [
                            {
                                "id": "32a62809-ae51-11ed-a1c8-0492260e5902",
                                "name": "Mobility Troop",
                                "description": null,
                                "platoon_id": "19e9d55f-ae51-11ed-a1c8-0492260e5902",
                                "members": [
                                    {
                                        "uuid": "08a2fb98-ae51-11ed-a1c8-0492260e5902",
                                        "name": "Test user 1",
                                        "avatar": "https:\/\/cdn.discordapp.com\/avatars\/277494487213932555\/c3ef0be5b960f4a765fb29143583b868.jpg",
                                        "discord_avatar": "https:\/\/cdn.discordapp.com\/avatars\/277494487213932555\/c3ef0be5b960f4a765fb29143583b868.jpg",
                                        "discord_id": "123",
                                        "steam_avatar": null,
                                        "steam_id": null,
                                        "teamspeak_id": null,
                                        "created_at": "2023-02-17 01:25:39",
                                        "company_id": "f9d8e1ae-ae4c-11ed-a1c8-0492260e5902",
                                        "platoon_id": "19e9d55f-ae51-11ed-a1c8-0492260e5902",
                                        "squad_id": "32a62809-ae51-11ed-a1c8-0492260e5902"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "id": "4be5377a-ae51-11ed-a1c8-0492260e5902",
                        "name": "Test",
                        "description": null,
                        "company_id": "f9d8e1ae-ae4c-11ed-a1c8-0492260e5902",
                        "members": [],
                        "squads": []
                    }
                ]
            }
        ]
    })
}
</script>
<template>
    <div class="orbat-wrapper">
        <div class="orbat" v-for="company in companies" :key="company.id">
            <h1 class="level-1 rectangle">{{company.name}}</h1>
            <ol class="level-2-wrapper">
                <li v-for="platoon in company.platoons" :key="platoon.id">
                    <h2 class="level-2 rectangle">{{platoon.name}}</h2>
                    <ol class="level-3-wrapper" :style="`--count: ${platoon.squads.length}`">
                        <li v-for="squad in platoon.squads">
                            <h3 class="level-3 rectangle">{{squad.name}}</h3>
                            <ol class="level-4-wrapper">
                                <li v-for="member in squad.members">
                                    <h4 class="level-4 rectangle">{{member.name}}</h4>
                                </li>
                            </ol>
                        </li>
                    </ol>
                </li>
            </ol>
        </div>
    </div>
</template>
<style scoped>
ol {
    list-style: none;
}

.orbat-wrapper {
    display: flex;
}

.orbat {
    padding: 0 10px;
    margin: 0 auto;
    text-align: center;
}

.rectangle {
    position: relative;
    padding: 20px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
}


/* LEVEL-1 STYLES
–––––––––––––––––––––––––––––––––––––––––––––––––– */
.level-1 {
    width: 50%;
    margin: 0 auto 40px;
    background: #222;
}

.level-1::before {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    width: 2px;
    height: 20px;
    background: #fff;
}


/* LEVEL-2 STYLES
–––––––––––––––––––––––––––––––––––––––––––––––––– */
.level-2-wrapper {
    position: relative;
    display: grid;
    grid-template-columns: repeat(2, 1fr);
}

.level-2-wrapper::before {
    content: "";
    position: absolute;
    top: -20px;
    left: 25%;
    width: 50%;
    height: 2px;
    background: #fff;
}

.level-2-wrapper::after {
    display: none;
    content: "";
    position: absolute;
    left: -20px;
    bottom: -20px;
    width: calc(100% + 20px);
    height: 2px;
    background: #fff;
}

.level-2-wrapper li {
    position: relative;
}

.level-2-wrapper>li::before {
    content: "";
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    width: 2px;
    height: 20px;
    background: #fff;
}

.level-2 {
    width: 70%;
    margin: 0 auto 40px;
    background: #222;
}

.level-2::before {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    width: 2px;
    height: 20px;
    background: #fff;
}

.level-2::after {
    display: none;
    content: "";
    position: absolute;
    top: 50%;
    left: 0%;
    transform: translate(-100%, -50%);
    width: 20px;
    height: 2px;
    background: #fff;
}


/* LEVEL-3 STYLES
–––––––––––––––––––––––––––––––––––––––––––––––––– */
.level-3-wrapper {
    position: relative;
    display: flex;
    grid-template-columns: repeat(2, 1fr);
    grid-column-gap: 20px;
    min-width: 90%;
    margin: 0 auto;
}

.level-3-wrapper::before {
    content: "";
    position: absolute;
    top: -20px;
    transform: translateX(-50%);
    left: 36.5%;
    min-width: calc(26.5% * var(--count));
    height: 2px;
    background: #fff;
}

.level-3-wrapper>li::before {
    content: "";
    position: absolute;
    top: 0;
    left: 50%;
    transform: translate(-50%, -100%);
    width: 2px;
    height: 20px;
    background: #fff;
}

.level-3 {
    margin-bottom: 20px;
    background: #222;
}


/* LEVEL-4 STYLES
–––––––––––––––––––––––––––––––––––––––––––––––––– */
.level-4-wrapper {
    position: relative;
    width: 80%;
    margin-left: auto;
}

.level-4-wrapper::before {
    content: "";
    position: absolute;
    top: -20px;
    left: -20px;
    width: 2px;
    height: calc(100% - 10px);
    background: #fff;
}

.level-4-wrapper li+li {
    margin-top: 20px;
}

.level-4 {
    font-weight: normal;
    background: #222;
}

.level-4::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 0%;
    transform: translate(-100%, -50%);
    width: 20px;
    height: 2px;
    background: #fff;
}
</style>